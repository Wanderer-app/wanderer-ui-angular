<h3>Comments:</h3>
<a href="javascript:;" (click)="loadMoreComments()" class>View all {{totalCommentsNumber}} comments</a>

<div class="mt-2" *ngFor="let comment of comments">

    <div class="row">
        <div class="col-1">
            <img src="assets/img/avatar.jpg" alt="" style="max-width: 100%;height: auto;" class="rounded-circle img-fluid">
        </div>
        <div class="col-9">
            <div class="">
                <h5 class="d-inline mr-2">{{ comment.author | fullname }}</h5> <small>{{comment.createdAt.toJSON()}}</small>
                <p>{{comment.text}}</p>
            </div>
        </div>
        <div class="col-1 text-right">
            <div class="text-center" style="width:fit-content">
                <app-rating 
                    [size]="ratingSize"
                    [contentId]="comment.id"
                    [ratingValue]="comment.rating.totalRating"
                    [service]="commentsService"
                    [userVoteDirection]="comment.userVoteDirection"
                ></app-rating>
            </div>
        </div>
    </div>

    <div class="row" *ngFor="let response of comment.responsesPreview">
        <div class="col-1 border-right border-dark" ></div>
        <div class="col-11">
            <div class="row">
                <div class="col-1">
                    <img src="assets/img/avatar.jpg" alt="" style="max-width: 100%;height: auto;" class="rounded-circle img-fluid">
                </div>
                <div class="col-9">
                    <div class="">
                        <h5 class="d-inline mr-2">{{ response.author | fullname }}</h5> <small>{{response.createdAt.toJSON()}}</small>
                        <p>{{response.text}}</p>
                    </div>
                </div>
                <div class="col-1 text-right">
                    <app-rating 
                        [size]="ratingSize"
                        [contentId]="response.id"
                        [ratingValue]="response.rating.totalRating"
                        [service]="commentsService"
                        [userVoteDirection]="response.userVoteDirection"
                    ></app-rating>
                </div>
            </div>
        </div>
    </div>

</div>

<hr>

<form class="mt-2" onsubmit="return false">
    <div class="row">
        <div class="col-10 form-group">
            <textarea id="newCommentText" minlength="3" class="form-control ng-invalid" style="resize: none;" rows="3" placeholder="Add Comment..."></textarea>
        </div>
    
        <div class="col-2 form-group">
            <button type="submit" (click)="addCommentToContent()" class="btn btn-primary" style="height: 100%; width: 100%;">Send</button>
        </div>
    </div>
</form>